<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Comic Grading Tool (Beta)</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="images/sinto-graves-logo2.png" />
</head>

<body>
  <div class="top-bar">
    <div class="title-block">
      <h1>Comic Grading Beta .6 - In Editing Mode</h1>
      <p class="tagline">
        Quick visual grading helper â€“ spine, cover, corners, and interior.
      </p>
    </div>
    <img
      src="images/sinto-graves-logo2.png"
      alt="Sinto Gra'Ves Comic Grading"
      class="logo"
    />
  </div>

  <form id="grading-form">
    <!-- Comic Info Fields -->
    <div include-html="partials/info-fields.html"></div>

    <!-- Gem Mint Checkbox -->
    <fieldset>
      <legend>Top Condition / Gem Mint Check</legend>
      <label>
        <input type="checkbox" id="gm_candidate" />
        This copy looks absolutely perfect to you (Gem Mint 10.0 candidate if no discrepancies).
      </label>
    </fieldset>

    <!-- Optional Cover Upload -->
    <fieldset>
      <legend>Comic Image (Optional)</legend>
      <label>
        Front cover image:
        <input type="file" id="cover_image" accept="image/*" />
      </label>
      <div id="cover-preview-wrapper">
        <p class="hint" id="cover-preview-hint">
          Optional: upload a photo/scan of the front cover. This will be shown on screen
          and included with your printed report.
        </p>
        <img id="cover-preview" alt="Comic cover preview" />
      </div>
    </fieldset>

    <!-- Marvel Value Stamp -->
    <div include-html="partials/value-stamp.html"></div>

    <!-- Grading Sections -->
    <div include-html="sections/bindery.html"></div>
    <div include-html="sections/corners.html"></div>
    <div include-html="sections/edges.html"></div>
    <div include-html="sections/spine.html"></div>

    <!-- Action Buttons -->
    <div include-html="partials/buttons.html"></div>
  </form>

  <section id="result" style="margin-top:1.5rem;"></section>

  <!-- JavaScript for client-side includes -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const includeElements = document.querySelectorAll('[include-html]');
      includeElements.forEach(async (el) => {
        const file = el.getAttribute('include-html');
        try {
          const response = await fetch(file);
          if (!response.ok) throw new Error('Failed to fetch ' + file);
          const content = await response.text();
          el.innerHTML = content;
          el.removeAttribute('include-html');
        } catch (err) {
          el.innerHTML = `<p style="color:red;">Error loading ${file}</p>`;
          console.warn(err);
        }
      });
    });
  </script>

 <!-- Client-side HTML includes -->
<script src="ui/includes.js"></script>

<!-- Data -->
<script src="data/valueStampIndex.js"></script>

<!-- Grading logic -->
<script src="grading/scoringUtils.js"></script>
<script src="grading/scoreBindery.js"></script>
<script src="grading/scoreCorners.js"></script>
<script src="grading/scoreEdges.js"></script>
<script src="grading/scoreSpine.js"></script>

<!-- UI helpers -->
<script src="ui/multiLocation.js"></script>

<!-- Main app (must run last) -->
<script src="app.js"></script>

</body>
</html>
